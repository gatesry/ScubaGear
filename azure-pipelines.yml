# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: windows-latest

- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      name: Keep clone up to date
      variables:
        REMOTE_ADDR: 'https://github.com/gatesry/ScubaGear.git'
      stages:
        - stage: running_git_commands
          displayName: running_git_commands
          jobs:
            - job: initiate
              displayName: initiate
              continueOnError: false
              steps:
              - checkout: self
                clean: true
                persistCredentials: true
                displayName: run_commands
              - bash: | 
                  git checkout master
                  git remote add repoGithub $(REMOTE_ADDR)
                  git fetch repoGithub master
                  git reset --hard repoGithub/master
                  git pull --rebase repoGithub master
                  git push -f origin
